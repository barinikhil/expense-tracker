<section class="panel">
  <h2>Categories</h2>
  <p *ngIf="error" class="error">{{ error }}</p>

  <div class="form-row">
    <input [(ngModel)]="newCategory.name" placeholder="Category name" />
    <input [(ngModel)]="newCategory.description" placeholder="Description" />
    <button (click)="addCategory()">Add Category</button>
  </div>

  <ul>
    <li *ngFor="let category of categories">
      <ng-container *ngIf="editingCategoryId !== category.id; else editCategoryBlock">
        <strong>{{ category.name }}</strong> - {{ category.description }}
        <button (click)="startEditCategory(category)">Edit</button>
      </ng-container>

      <ng-template #editCategoryBlock>
        <div class="form-row inline-edit">
          <input [(ngModel)]="editingCategory.name" />
          <input [(ngModel)]="editingCategory.description" />
          <button (click)="saveCategoryEdit()">Save</button>
          <button (click)="cancelCategoryEdit()" class="secondary">Cancel</button>
        </div>
      </ng-template>

      <small *ngIf="category.subCategories.length">
        Sub-categories: {{ subCategoryNames(category) }}
      </small>
    </li>
  </ul>
</section>
