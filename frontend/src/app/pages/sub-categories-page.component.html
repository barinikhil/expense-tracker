<section class="panel">
  <h2>Sub-categories</h2>
  <p *ngIf="error" class="error">{{ error }}</p>

  <div class="form-row">
    <input [(ngModel)]="newSubCategory.name" placeholder="Sub-category name" />
    <select [(ngModel)]="newSubCategory.categoryId">
      <option [ngValue]="0">Select category</option>
      <option *ngFor="let category of categories" [ngValue]="category.id">{{ category.name }}</option>
    </select>
    <button (click)="addSubCategory()">Add Sub-category</button>
  </div>

  <ul>
    <li *ngFor="let subCategory of subCategories">
      <ng-container *ngIf="editingSubCategoryId !== subCategory.id; else editSubCategoryBlock">
        <strong>{{ subCategory.name }}</strong> in {{ subCategory.categoryName }}
        <button (click)="startEditSubCategory(subCategory)">Edit</button>
      </ng-container>

      <ng-template #editSubCategoryBlock>
        <div class="form-row inline-edit">
          <input [(ngModel)]="editingSubCategory.name" />
          <select [(ngModel)]="editingSubCategory.categoryId">
            <option *ngFor="let category of categories" [ngValue]="category.id">{{ category.name }}</option>
          </select>
          <button (click)="saveSubCategoryEdit()">Save</button>
          <button (click)="cancelSubCategoryEdit()" class="secondary">Cancel</button>
        </div>
      </ng-template>
    </li>
  </ul>
</section>
